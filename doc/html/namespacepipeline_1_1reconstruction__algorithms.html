<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.18"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>TCC Structure from Motion: pipeline.reconstruction_algorithms Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">TCC Structure from Motion
   &#160;<span id="projectnumber">1.0.0</span>
   </div>
   <div id="projectbrief">Senior project on Structure from Motion for scene and camera trajectory reconstruction from monocular video</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.18 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacepipeline.html">pipeline</a></li><li class="navelem"><a class="el" href="namespacepipeline_1_1reconstruction__algorithms.html">reconstruction_algorithms</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">pipeline.reconstruction_algorithms Namespace Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a7e9681e59e853d70f0fee2e8ef69c7f3"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacepipeline_1_1reconstruction__algorithms.html#a7e9681e59e853d70f0fee2e8ef69c7f3">_solve_pnp</a> (config, track_slice, track_mask, cloud, R=None, T=None, method=None)</td></tr>
<tr class="separator:a7e9681e59e853d70f0fee2e8ef69c7f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba2f11bb59445d22c2cd00e1cae4d0d3"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacepipeline_1_1reconstruction__algorithms.html#aba2f11bb59445d22c2cd00e1cae4d0d3">solve_pnp</a> (config, track, mask, cloud, R=None, T=None)</td></tr>
<tr class="separator:aba2f11bb59445d22c2cd00e1cae4d0d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8225b01aca333e4c26e92480d26cb0f7"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacepipeline_1_1reconstruction__algorithms.html#a8225b01aca333e4c26e92480d26cb0f7">five_pt</a> (config, tracks, masks, prev_R, prev_T)</td></tr>
<tr class="separator:a8225b01aca333e4c26e92480d26cb0f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abad2530cdcf777ed8db1f078b19f8320"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacepipeline_1_1reconstruction__algorithms.html#abad2530cdcf777ed8db1f078b19f8320">refine_track</a> (E, config, five_pt_mask, masks, pair_mask, track_pair, tracks)</td></tr>
<tr class="separator:abad2530cdcf777ed8db1f078b19f8320"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab57c5882d876ac091b0e18b202294af9"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacepipeline_1_1reconstruction__algorithms.html#ab57c5882d876ac091b0e18b202294af9">triangulate</a> (camera_matrix, R_1, T_1, R_2, T_2, tracks, masks)</td></tr>
<tr class="separator:ab57c5882d876ac091b0e18b202294af9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aedff01306e1ee794ca1937b7fffdd4d2"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacepipeline_1_1reconstruction__algorithms.html#aedff01306e1ee794ca1937b7fffdd4d2">calculate_projection</a> (config, tracks, masks, prev_R, prev_T, cloud)</td></tr>
<tr class="separator:aedff01306e1ee794ca1937b7fffdd4d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ad644a83287dd39d4343d87d88d63f8"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacepipeline_1_1reconstruction__algorithms.html#a3ad644a83287dd39d4343d87d88d63f8">calculate_projection_error</a> (camera_matrix, Rs, Ts, cloud, tracks, masks, mean=False)</td></tr>
<tr class="separator:a3ad644a83287dd39d4343d87d88d63f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a7e9681e59e853d70f0fee2e8ef69c7f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7e9681e59e853d70f0fee2e8ef69c7f3">&#9670;&nbsp;</a></span>_solve_pnp()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">def pipeline.reconstruction_algorithms._solve_pnp </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>track_slice</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>track_mask</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>cloud</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>R</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>T</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>method</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Adaptation of the SolvePnP algorithm for a new track slice (frame) and existing point cloud.

It calculates the new frame's rotation matrix and translation vector based on an existing
point cloud. If the method to be used is SOLVEPNP_ITERATIVE an initial guess of R and T can
also be supplied

:param config: config object. See config.py for more information
:param track_slice: 2 column matrix with 2D features
:param track_mask: point cloud indexes for features in the track slice
:param cloud: point cloud with N points as a ndarray with shape Nx3
:param R: rotation matrix seed
:param T: translation vector seed
:param method: method to be used in the algorithm
:return: new frame's rotation matrix and translation vector
</pre> <div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="namespacepipeline_1_1reconstruction__algorithms_a7e9681e59e853d70f0fee2e8ef69c7f3_icgraph.png" border="0" usemap="#namespacepipeline_1_1reconstruction__algorithms_a7e9681e59e853d70f0fee2e8ef69c7f3_icgraph" alt=""/></div>
<map name="namespacepipeline_1_1reconstruction__algorithms_a7e9681e59e853d70f0fee2e8ef69c7f3_icgraph" id="namespacepipeline_1_1reconstruction__algorithms_a7e9681e59e853d70f0fee2e8ef69c7f3_icgraph">
<area shape="rect" title=" " alt="" coords="1117,52,1279,96"/>
<area shape="rect" href="namespacepipeline_1_1reconstruction__algorithms.html#aba2f11bb59445d22c2cd00e1cae4d0d3" title=" " alt="" coords="914,52,1069,96"/>
<area shape="rect" href="classpipeline_1_1video__pipeline_1_1_video_pipeline.html#affefbd1d9b49b339f512342c8b1a8005" title=" " alt="" coords="490,5,657,65"/>
<area shape="rect" href="namespacepipeline_1_1reconstruction__algorithms.html#aedff01306e1ee794ca1937b7fffdd4d2" title=" " alt="" coords="711,77,866,137"/>
<area shape="rect" href="classpipeline_1_1video__pipeline_1_1_video_pipeline.html#aede7542e6f79bbd82fcb43663baea467" title=" " alt="" coords="213,29,435,73"/>
<area shape="rect" href="classpipeline_1_1video__pipeline_1_1_video_pipeline.html#a5d3491067b0d4c0442b8e335d06424e1" title=" " alt="" coords="5,60,165,104"/>
<area shape="rect" href="classpipeline_1_1video__pipeline_1_1_video_pipeline.html#a6e06a73174a28e49d18372f76e361626" title=" " alt="" coords="483,89,663,133"/>
</map>
</div>

</div>
</div>
<a id="aedff01306e1ee794ca1937b7fffdd4d2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aedff01306e1ee794ca1937b7fffdd4d2">&#9670;&nbsp;</a></span>calculate_projection()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def pipeline.reconstruction_algorithms.calculate_projection </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>tracks</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>masks</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>prev_R</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>prev_T</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>cloud</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Bundle up toguether above algorithms for the calculation of a camera's postion in space and
3D position of detected features

:param config: config object. See config.py for more information
:param tracks: list of 2D feature vectors. Each vector has the shape Dx2
:param masks: list of index masks for each feature vector. Indexes refer to the position of the item in the cloud
:param prev_R: previous camera's rotation matrix in the global reference frame
:param prev_T: previous camera's translation vector in the global reference frame
:param cloud: point cloud with N points as a ndarray with shape Nx3
:return: rotation and translation of new camera and calculated 3D points with their indexes
</pre> <div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="namespacepipeline_1_1reconstruction__algorithms_aedff01306e1ee794ca1937b7fffdd4d2_cgraph.png" border="0" usemap="#namespacepipeline_1_1reconstruction__algorithms_aedff01306e1ee794ca1937b7fffdd4d2_cgraph" alt=""/></div>
<map name="namespacepipeline_1_1reconstruction__algorithms_aedff01306e1ee794ca1937b7fffdd4d2_cgraph" id="namespacepipeline_1_1reconstruction__algorithms_aedff01306e1ee794ca1937b7fffdd4d2_cgraph">
<area shape="rect" title=" " alt="" coords="5,65,160,125"/>
<area shape="rect" href="namespacepipeline_1_1reconstruction__algorithms.html#a8225b01aca333e4c26e92480d26cb0f7" title=" " alt="" coords="209,5,363,49"/>
<area shape="rect" href="namespacepipeline_1_1reconstruction__algorithms.html#aba2f11bb59445d22c2cd00e1cae4d0d3" title=" " alt="" coords="209,73,363,117"/>
<area shape="rect" href="namespacepipeline_1_1reconstruction__algorithms.html#ab57c5882d876ac091b0e18b202294af9" title=" " alt="" coords="208,141,364,185"/>
<area shape="rect" href="namespacepipeline_1_1reconstruction__algorithms.html#abad2530cdcf777ed8db1f078b19f8320" title=" " alt="" coords="412,5,576,49"/>
<area shape="rect" href="namespacepipeline_1_1reconstruction__algorithms.html#a7e9681e59e853d70f0fee2e8ef69c7f3" title=" " alt="" coords="413,73,575,117"/>
</map>
</div>
<div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><img src="namespacepipeline_1_1reconstruction__algorithms_aedff01306e1ee794ca1937b7fffdd4d2_icgraph.png" border="0" usemap="#namespacepipeline_1_1reconstruction__algorithms_aedff01306e1ee794ca1937b7fffdd4d2_icgraph" alt=""/></div>
<map name="namespacepipeline_1_1reconstruction__algorithms_aedff01306e1ee794ca1937b7fffdd4d2_icgraph" id="namespacepipeline_1_1reconstruction__algorithms_aedff01306e1ee794ca1937b7fffdd4d2_icgraph">
<area shape="rect" title=" " alt="" coords="711,28,866,88"/>
<area shape="rect" href="classpipeline_1_1video__pipeline_1_1_video_pipeline.html#a6e06a73174a28e49d18372f76e361626" title=" " alt="" coords="483,36,663,80"/>
<area shape="rect" href="classpipeline_1_1video__pipeline_1_1_video_pipeline.html#aede7542e6f79bbd82fcb43663baea467" title=" " alt="" coords="213,5,435,49"/>
<area shape="rect" href="classpipeline_1_1video__pipeline_1_1_video_pipeline.html#a5d3491067b0d4c0442b8e335d06424e1" title=" " alt="" coords="5,36,165,80"/>
</map>
</div>

</div>
</div>
<a id="a3ad644a83287dd39d4343d87d88d63f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3ad644a83287dd39d4343d87d88d63f8">&#9670;&nbsp;</a></span>calculate_projection_error()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def pipeline.reconstruction_algorithms.calculate_projection_error </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>camera_matrix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>Rs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>Ts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>cloud</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>tracks</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>masks</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>mean</em> = <code>False</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Calculates the projection error of a given set of frames a point cloud. Resulting metric is
deviation in number of pixels averaged for each feature in each frame

:param Rs: list of R matrices
:param Ts: list of T vectors
:param cloud: point cloud with N points as a ndarray with shape Nx3
:param tracks: list of 2D feature vectors. Each vector has the shape Dx2
:param masks: list of index masks for each feature vector. Indexes refer to the position of the item in the cloud
:param mean: flag to indicate if return should be the mean of all values
:return: list of vectors with deviation in pixels between measurement and projection
</pre> <div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><img src="namespacepipeline_1_1reconstruction__algorithms_a3ad644a83287dd39d4343d87d88d63f8_icgraph.png" border="0" usemap="#namespacepipeline_1_1reconstruction__algorithms_a3ad644a83287dd39d4343d87d88d63f8_icgraph" alt=""/></div>
<map name="namespacepipeline_1_1reconstruction__algorithms_a3ad644a83287dd39d4343d87d88d63f8_icgraph" id="namespacepipeline_1_1reconstruction__algorithms_a3ad644a83287dd39d4343d87d88d63f8_icgraph">
<area shape="rect" title=" " alt="" coords="1204,83,1359,143"/>
<area shape="rect" href="classpipeline_1_1synthetic__pipeline_1_1_synthetic_pipeline.html#a8d19aa07e484c76d7b1a6eb70c6f89fe" title=" " alt="" coords="948,124,1156,184"/>
<area shape="rect" href="classpipeline_1_1video__pipeline_1_1_video_pipeline.html#af722585b7cab69620ed3cecf8db7c8e1" title=" " alt="" coords="969,39,1135,99"/>
<area shape="rect" href="classpipeline_1_1video__pipeline_1_1_video_pipeline.html#affefbd1d9b49b339f512342c8b1a8005" title=" " alt="" coords="722,128,889,188"/>
<area shape="rect" href="classpipeline_1_1video__pipeline_1_1_video_pipeline.html#ac7bd7543d2e3c88b3fba14d28e38f1e1" title=" " alt="" coords="711,28,900,104"/>
<area shape="rect" href="classpipeline_1_1video__pipeline_1_1_video_pipeline.html#a6e06a73174a28e49d18372f76e361626" title=" " alt="" coords="483,52,663,96"/>
<area shape="rect" href="classpipeline_1_1video__pipeline_1_1_video_pipeline.html#aede7542e6f79bbd82fcb43663baea467" title=" " alt="" coords="213,112,435,156"/>
<area shape="rect" href="classpipeline_1_1video__pipeline_1_1_video_pipeline.html#a5d3491067b0d4c0442b8e335d06424e1" title=" " alt="" coords="5,83,165,127"/>
</map>
</div>

</div>
</div>
<a id="a8225b01aca333e4c26e92480d26cb0f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8225b01aca333e4c26e92480d26cb0f7">&#9670;&nbsp;</a></span>five_pt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def pipeline.reconstruction_algorithms.five_pt </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>tracks</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>masks</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>prev_R</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>prev_T</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Adaptation of five point routine.

It first calculates the relative movement of camreta 2 in respect of camera 1 applying the
necessary masks, then converts the result to camera 1 reference frame, which can be the
camera 1's reference frame relative to camera 0's or global's

:param config: config object. See config.py for more information
:param track_slice: 2 column matrix with 2D features
:param track_mask: point cloud indexes for features in the track slice
:param prev_R: camera 1's rotation matrix
:param prev_T: camera 1's translation matrix
:return: rotation and translation of new camera and calculated 3D points with their indexes
</pre> <div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><img src="namespacepipeline_1_1reconstruction__algorithms_a8225b01aca333e4c26e92480d26cb0f7_cgraph.png" border="0" usemap="#namespacepipeline_1_1reconstruction__algorithms_a8225b01aca333e4c26e92480d26cb0f7_cgraph" alt=""/></div>
<map name="namespacepipeline_1_1reconstruction__algorithms_a8225b01aca333e4c26e92480d26cb0f7_cgraph" id="namespacepipeline_1_1reconstruction__algorithms_a8225b01aca333e4c26e92480d26cb0f7_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,160,49"/>
<area shape="rect" href="namespacepipeline_1_1reconstruction__algorithms.html#abad2530cdcf777ed8db1f078b19f8320" title=" " alt="" coords="208,5,372,49"/>
</map>
</div>
<div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><img src="namespacepipeline_1_1reconstruction__algorithms_a8225b01aca333e4c26e92480d26cb0f7_icgraph.png" border="0" usemap="#namespacepipeline_1_1reconstruction__algorithms_a8225b01aca333e4c26e92480d26cb0f7_icgraph" alt=""/></div>
<map name="namespacepipeline_1_1reconstruction__algorithms_a8225b01aca333e4c26e92480d26cb0f7_icgraph" id="namespacepipeline_1_1reconstruction__algorithms_a8225b01aca333e4c26e92480d26cb0f7_icgraph">
<area shape="rect" title=" " alt="" coords="941,52,1095,96"/>
<area shape="rect" href="namespacepipeline_1_1reconstruction__algorithms.html#aedff01306e1ee794ca1937b7fffdd4d2" title=" " alt="" coords="725,5,879,65"/>
<area shape="rect" href="namespacepipeline_1_1init__algorithms.html#a6fc14c95f4aab4ee6b08485c96d3527e" title=" " alt="" coords="711,89,893,133"/>
<area shape="rect" href="classpipeline_1_1video__pipeline_1_1_video_pipeline.html#a6e06a73174a28e49d18372f76e361626" title=" " alt="" coords="483,52,663,96"/>
<area shape="rect" href="classpipeline_1_1video__pipeline_1_1_video_pipeline.html#aede7542e6f79bbd82fcb43663baea467" title=" " alt="" coords="213,21,435,65"/>
<area shape="rect" href="classpipeline_1_1video__pipeline_1_1_video_pipeline.html#a5d3491067b0d4c0442b8e335d06424e1" title=" " alt="" coords="5,52,165,96"/>
</map>
</div>

</div>
</div>
<a id="abad2530cdcf777ed8db1f078b19f8320"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abad2530cdcf777ed8db1f078b19f8320">&#9670;&nbsp;</a></span>refine_track()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def pipeline.reconstruction_algorithms.refine_track </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>E</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>five_pt_mask</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>masks</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>pair_mask</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>track_pair</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>tracks</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Refines a track (vector of features) by imposing some epipolar constraints

:param E: essential matrix
:param config: config object. See config.py for more information
:param five_pt_mask: binary mask for points kept after 5 pt algorithm
:param masks: original track masks containing list of index masks for each feature vector.
Indexes refer to the position of the item in the cloud
:param pair_mask: combined mask for pair of tracks
:param track_pair: list of 2D feature vectors where each feature is present in both tracks
:param tracks: original tracks of features
:return: refined essential matrix, five pt mask and track pair
</pre> <div id="dynsection-6" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><img src="namespacepipeline_1_1reconstruction__algorithms_abad2530cdcf777ed8db1f078b19f8320_icgraph.png" border="0" usemap="#namespacepipeline_1_1reconstruction__algorithms_abad2530cdcf777ed8db1f078b19f8320_icgraph" alt=""/></div>
<map name="namespacepipeline_1_1reconstruction__algorithms_abad2530cdcf777ed8db1f078b19f8320_icgraph" id="namespacepipeline_1_1reconstruction__algorithms_abad2530cdcf777ed8db1f078b19f8320_icgraph">
<area shape="rect" title=" " alt="" coords="1143,52,1307,96"/>
<area shape="rect" href="namespacepipeline_1_1reconstruction__algorithms.html#a8225b01aca333e4c26e92480d26cb0f7" title=" " alt="" coords="941,52,1095,96"/>
<area shape="rect" href="namespacepipeline_1_1reconstruction__algorithms.html#aedff01306e1ee794ca1937b7fffdd4d2" title=" " alt="" coords="725,5,879,65"/>
<area shape="rect" href="namespacepipeline_1_1init__algorithms.html#a6fc14c95f4aab4ee6b08485c96d3527e" title=" " alt="" coords="711,89,893,133"/>
<area shape="rect" href="classpipeline_1_1video__pipeline_1_1_video_pipeline.html#a6e06a73174a28e49d18372f76e361626" title=" " alt="" coords="483,52,663,96"/>
<area shape="rect" href="classpipeline_1_1video__pipeline_1_1_video_pipeline.html#aede7542e6f79bbd82fcb43663baea467" title=" " alt="" coords="213,21,435,65"/>
<area shape="rect" href="classpipeline_1_1video__pipeline_1_1_video_pipeline.html#a5d3491067b0d4c0442b8e335d06424e1" title=" " alt="" coords="5,52,165,96"/>
</map>
</div>

</div>
</div>
<a id="aba2f11bb59445d22c2cd00e1cae4d0d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aba2f11bb59445d22c2cd00e1cae4d0d3">&#9670;&nbsp;</a></span>solve_pnp()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def pipeline.reconstruction_algorithms.solve_pnp </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>track</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>mask</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>cloud</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>R</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>T</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Wrapper for _solve_pnp where the method is chosen automatically

:param config: config object. See config.py for more information
:param track_slice: 2 column matrix with 2D features
:param track_mask: point cloud indexes for features in the track slice
:param cloud: point cloud with N points as a ndarray with shape Nx3
:param R: rotation matrix seed
:param T: translation vector seed
:param method: method to be used in the algorithm
:return: new frame's rotation matrix and translation vector
</pre> <div id="dynsection-7" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><img src="namespacepipeline_1_1reconstruction__algorithms_aba2f11bb59445d22c2cd00e1cae4d0d3_cgraph.png" border="0" usemap="#namespacepipeline_1_1reconstruction__algorithms_aba2f11bb59445d22c2cd00e1cae4d0d3_cgraph" alt=""/></div>
<map name="namespacepipeline_1_1reconstruction__algorithms_aba2f11bb59445d22c2cd00e1cae4d0d3_cgraph" id="namespacepipeline_1_1reconstruction__algorithms_aba2f11bb59445d22c2cd00e1cae4d0d3_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,160,49"/>
<area shape="rect" href="namespacepipeline_1_1reconstruction__algorithms.html#a7e9681e59e853d70f0fee2e8ef69c7f3" title=" " alt="" coords="208,5,370,49"/>
</map>
</div>
<div id="dynsection-8" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-8-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-8-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-8-content" class="dyncontent" style="display:none;">
<div class="center"><img src="namespacepipeline_1_1reconstruction__algorithms_aba2f11bb59445d22c2cd00e1cae4d0d3_icgraph.png" border="0" usemap="#namespacepipeline_1_1reconstruction__algorithms_aba2f11bb59445d22c2cd00e1cae4d0d3_icgraph" alt=""/></div>
<map name="namespacepipeline_1_1reconstruction__algorithms_aba2f11bb59445d22c2cd00e1cae4d0d3_icgraph" id="namespacepipeline_1_1reconstruction__algorithms_aba2f11bb59445d22c2cd00e1cae4d0d3_icgraph">
<area shape="rect" title=" " alt="" coords="914,52,1069,96"/>
<area shape="rect" href="classpipeline_1_1video__pipeline_1_1_video_pipeline.html#affefbd1d9b49b339f512342c8b1a8005" title=" " alt="" coords="490,5,657,65"/>
<area shape="rect" href="namespacepipeline_1_1reconstruction__algorithms.html#aedff01306e1ee794ca1937b7fffdd4d2" title=" " alt="" coords="711,77,866,137"/>
<area shape="rect" href="classpipeline_1_1video__pipeline_1_1_video_pipeline.html#aede7542e6f79bbd82fcb43663baea467" title=" " alt="" coords="213,29,435,73"/>
<area shape="rect" href="classpipeline_1_1video__pipeline_1_1_video_pipeline.html#a5d3491067b0d4c0442b8e335d06424e1" title=" " alt="" coords="5,60,165,104"/>
<area shape="rect" href="classpipeline_1_1video__pipeline_1_1_video_pipeline.html#a6e06a73174a28e49d18372f76e361626" title=" " alt="" coords="483,89,663,133"/>
</map>
</div>

</div>
</div>
<a id="ab57c5882d876ac091b0e18b202294af9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab57c5882d876ac091b0e18b202294af9">&#9670;&nbsp;</a></span>triangulate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def pipeline.reconstruction_algorithms.triangulate </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>camera_matrix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>R_1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>T_1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>R_2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>T_2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>tracks</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>masks</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Calculates features' 3D locations based on their 2D projections and rotation matrices and
translation vectors of both cameras

:param camera_matrix: calibration matrix
:param R_1: rotation matrix of camera 1
:param T_1: translation vector of camamera 1
:param R_2: rotation matrix of camera 2
:param T_2: translation vector of camamera 2
:param tracks: list of 2D feature vectors. Each vector has the shape Dx2
:param masks: list of index masks for each feature vector. Indexes refer to the position of the item in the cloud
:return: calculated 3D points and their indexes
</pre> <div id="dynsection-9" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-9-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-9-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-9-content" class="dyncontent" style="display:none;">
<div class="center"><img src="namespacepipeline_1_1reconstruction__algorithms_ab57c5882d876ac091b0e18b202294af9_icgraph.png" border="0" usemap="#namespacepipeline_1_1reconstruction__algorithms_ab57c5882d876ac091b0e18b202294af9_icgraph" alt=""/></div>
<map name="namespacepipeline_1_1reconstruction__algorithms_ab57c5882d876ac091b0e18b202294af9_icgraph" id="namespacepipeline_1_1reconstruction__algorithms_ab57c5882d876ac091b0e18b202294af9_icgraph">
<area shape="rect" title=" " alt="" coords="941,52,1097,96"/>
<area shape="rect" href="namespacepipeline_1_1reconstruction__algorithms.html#aedff01306e1ee794ca1937b7fffdd4d2" title=" " alt="" coords="725,5,879,65"/>
<area shape="rect" href="namespacepipeline_1_1init__algorithms.html#a6fc14c95f4aab4ee6b08485c96d3527e" title=" " alt="" coords="711,89,893,133"/>
<area shape="rect" href="classpipeline_1_1video__pipeline_1_1_video_pipeline.html#a6e06a73174a28e49d18372f76e361626" title=" " alt="" coords="483,52,663,96"/>
<area shape="rect" href="classpipeline_1_1video__pipeline_1_1_video_pipeline.html#aede7542e6f79bbd82fcb43663baea467" title=" " alt="" coords="213,21,435,65"/>
<area shape="rect" href="classpipeline_1_1video__pipeline_1_1_video_pipeline.html#a5d3491067b0d4c0442b8e335d06424e1" title=" " alt="" coords="5,52,165,96"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.18
</small></address>
</body>
</html>
